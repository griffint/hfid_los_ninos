<div style="padding-left:0px;padding-right:0px;">
	<div class="container-fluid">
		<div class="btn-group" uib-dropdown is-open="status.isopen" auto-close='disabled'>
			<!-- filter -->
			<button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle>
				Filter by ... <span class="caret"></span>
			</button>
			<ul class="uib-dropdown-menu" aria-labelledby="single-button">
				<label class="col-sm-12 control-label"><h3><center>People</center></h3></label>
				
				<div class="col-sm-12">
					<label for="age" class="col-sm-5 control-label">Min Age</label>
					<div class="col-sm-7">
						<input type="number" id="age" placeholder="From" class="form-control" autofocus>
					</div>
				</div>

				<div class="col-sm-12">
					<label for="ageto" class="col-sm-5 control-label">Max Age</label>
					<div class="col-sm-7">
						<input type="number" id="agero" placeholder="To" class="form-control" autofocus>
					</div>
				</div>

				<div class="col-sm-12">
					<label for="verified" class="col-sm-5 control-label">Verified</label>
					<div class="col-sm-7 checkbox">
						<label>
							<input type="checkbox">
						</label>
					</div>
				</div>

				<div class="col-sm-12">
					<label for="bed" class="col-sm-5 control-label">Bed Time</label>
					<div class="col-sm-7">
						<input type="range" id="bed" class="form-control">
					</div>
				</div>

				<div class="col-sm-12">
					<label for="clean" class="col-sm-5 control-label">Cleanliness</label>
					<div class="col-sm-7">
						<input type="range" id="clean" class="form-control">
					</div>
				</div>

				<div class="col-sm-12">
					<label for="noise" class="col-sm-5 control-label">Noise</label>
					<div class="col-sm-7">
						<input type="range" id="noise" class="form-control">
					</div>
				</div>

				<div class="col-sm-12">
					<label class="col-sm-4 control-label">Gender</label>
					<div class="col-sm-5">
						<label class="checkbox-inline">
							<input type="checkbox" id="femaleRadio" value="Female">Female
						</label>
					</div>
					<div class="col-sm-3">
						<label class="checkbox-inline">
							<input type="checkbox" id="maleRadio" value="Male">Male
						</label>
					</div>
				</div>

				<li class="divider"></li>


				<label class="col-sm-12 control-label"><h3><center>Places</center></h3></label>

				<div class="col-sm-12">
					<label for="verified" class="col-sm-5 control-label">Show Places</label>
					<div class="col-sm-7 checkbox">
						<label>
							<input type="checkbox">
						</label>
					</div>
				</div>

				<div class="col-sm-12">			

					<label for="price" class="col-sm-5 control-label">Min Price</label>
					<div class="col-sm-7">
						<input type="number" id="age" placeholder="From" class="form-control" autofocus>
					</div>
				</div>

				<div class="col-sm-12">
					<label for="priceto" class="col-sm-5 control-label">Max Price</label>
					<div class="col-sm-7">
						<input type="number" id="agero" placeholder="To" class="form-control" autofocus>
					</div>
				</div>

				<div class="col-sm-12">	
					<label for="bookmarks" class="col-sm-5 control-label">Bookmarks</label>
					<div class="col-sm-7 checkbox">
						<label>
							<input type="checkbox">
						</label>
					</div>
				</div>

				<div class="col-sm-12">
					<label for="startdate" class="col-sm-5 control-label">Start Date</label>
					<div class="col-sm-7">
						<input type="date" id="startdate" placeholder="From" class="form-control" autofocus>
					</div>
				</div>

				<div class="col-sm-12">
					<label for="enddate" class="col-sm-5 control-label">End Date</label>
					<div class="col-sm-7">
						<input type="date" id="enddate" placeholder="To" class="form-control" autofocus>
					</div>
				</div>

				<div class="col-sm-12">
					<label class="control-label col-sm-6">Beds</label>
					<div class="col-sm-6">
						<div class="row">
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="1bed" value="1">1
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="2bed" value="2">2
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="3bed" value="3">3
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="4bed" value="4">4
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="5bed" value="5">5
								</label>
							</div>
						</div>
					</div>
				</div>

				<div class="col-sm-12">
					<label class="control-label col-sm-6">Baths</label>
					<div class="col-sm-6">
						<div class="row">
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="1bath" value="1">1
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="2bath" value="2">2
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="3bath" value="3">3
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="4bath" value="4">4
								</label>
							</div>
							<div class="col-sm-1">
								<label class="checkbox-inline">
									<input type="checkbox" id="5bath" value="5">5
								</label>
							</div>
						</div>
					</div>
				</div>
			</div>
		</ul>
	</div>



	<div class="row">
		<!--<div class="col-md-9" style="overflow: hidden">	
			<img src='http://puu.sh/l2lrq/f8b88d7755.jpg'>
		</div>
		<div class="col-md-3">
			<div ui-view="sidebar"></div>
		</div>-->
		<div style="padding-left:0px;padding-right:0px;">
			<img src="../app/images/house.png" id="house" style="display: none;">
			<img src="../app/images/person.png" id="person" style="display: none;">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-9" style="overflow: hidden">	
						<div style="position: relative; left: 0; top: 0;">
							<img src="../app/images/map.jpg" style="position: absolute; top: 0px; left: 0px;"/>
							<canvas id="canvas" width="1919" height="975" style="border: 0px solid black; position: relative; top: 0; left: 0;"></canvas>
						</div>
					</div>
					<div id = "cardArea" class="col-md-3">
						<div ui-view="sidebar"></div>
					</div>
				</div>
			</div>
		</div>

		
	</div>
</div>

<script>
var canvas = new fabric.Canvas('canvas');

var testjson = ' { "people": { "1": { "id": 1, "x": 80, "y": 600, "avatar": "http://i.imgur.com/N4fpSXx.jpg", "name": "Alan", "age": 57, "sex": "M", "occupation": "Stay at home Dad", "description": "The worlds coolest software engineer is looking for a room in the Tenderloin district. I have 3 cats and they are staying with us.", "badgelist": "1,2,3", "hobbylist": "1,3,4", "sleepTime": 22, "wakeTime": 8, "cleanliness": 8, "noisiness": 3 }, "2": { "id": 2, "x": 80, "y": 600, "avatar": "http://i.imgur.com/N4fpSXx.jpg", "name": "Alan", "age": 57, "sex": "M", "occupation": "Stay at home Dad", "description": "The worlds coolest software engineer is looking for a room in the Tenderloin district. I have 3 cats and they are staying with us.", "badgelist": "1,2,3", "hobbylist": "1,3,4", "sleepTime": 22, "wakeTime": 8, "cleanliness": 8, "noisiness": 3 } }, "places": { "1": { "id": 1, "x": 90, "y": 800, "avatar": "https://upload.wikimedia.org/wikipedia/commons/6/6b/A._S._Bradford_House.JPG", "price": 1000, "rooms": 3, "baths": 2, "description": "Cozy tenderloin disctrict house" }, "2": { "id": 2, "x": 30, "y": 900, "avatar": "https://upload.wikimedia.org/wikipedia/commons/6/6b/A._S._Bradford_House.JPG", "price": 1000, "rooms": 3, "baths": 2, "description": "Cozy tenderloin disctrict house" } } }';


function initializeMap(){
	var locations = JSON.parse(testjson);
	$.each(locations.people, function(index, value) {
		addIcon(value,"person");
	}); 
	canvas.renderAll();
	$.each(locations.places, function(index, value) {
		addIcon(value,"house");
	}); 
	canvas.renderAll();
	console.log("done");
}


function addIcon(value, type){ 
	canvas.add(new fabric.Image(document.getElementById(type),{
		top : value.y,
		left : value.x,
		FARid : value.id,
		hasControls: false,
		hasBorders: false,
		lockMovementX: true,
		lockMovementY: true,
		FARtype: type,
		FARinfo: value
	}));
}
initializeMap();

canvas.on('object:selected', function(options) {
	current = canvas.getActiveObject();
	var myNode = document.getElementById("cardArea");
	while (myNode.firstChild) {
		myNode.removeChild(myNode.firstChild);
	}
	var newcard;
	if (current.FARtype == "person"){
		newcard = createPersonCard(current.FARinfo);
	}
	else if (current.FARtype == "house"){
		newcard = createHouseCard(current.FARinfo);
	}
	document.getElementById("cardArea").appendChild(newcard);
});

function createBadge(badgeObject){
	var placeHolderBadge = document.createElement("img");
		placeHolderBadge.className = "thumbnail farbadge";
		placeHolderBadge.src = badgeObject.image;
		placeHolderBadge.alt = badgeObject.hoverText;
	return placeHolderBadge;
}

function getBadges(badgeList){
	var locations = JSON.parse(testjson);
	var badges = locations.badges;
	var thisbadgeList = badgeList.split(",");
	var appendme = [];
	$.each(badges, function(index, value) {
		if(thisbadgeList.indexOf(value.id) > -1){
			appendme.push(createBadge(value));
		}
	});
	return appendme;
}

function createHouseCard(cardHouse){
	var cardContainer = document.createElement("div");
	cardContainer.className = "panel panel-default card";
	
	var cardBody = document.createElement("div");
	cardBody.className = "panel-body";
		var media = document.createElement("div");
		media.className = "media";
			var mediaLeft = document.createElement("div");
			mediaLeft.className = "media-left";
				var avatar = document.createElement("img");
					avatar.className = "media-object avatar";
					avatar.src = cardHouse.avatar;
				mediaLeft.appendChild(avatar);
			media.appendChild(mediaLeft);
			var mediaBody = document.createElement("div");
			mediaBody.className = "media-body";
				var price = document.createElement("h4");
					price.className = "media-heading";
					price.innerHTML = "$" + cardHouse.price + "/Room Per Month";
				mediaBody.appendChild(price);
				var roomBath = document.createElement("h4");
					roomBath.className = "media-heading";
					roomBath.innerHTML = cardHouse.rooms + " Rooms, " + cardHouse.rooms + " Baths";
				mediaBody.appendChild(roomBath);
			media.appendChild(mediaBody);
		cardBody.appendChild(media);
	cardContainer.appendChild(cardBody);
	
	
	
	var listGroup = document.createElement("ul");
	listGroup.className = "list-group";
		var desc = document.createElement("li");
		desc.className = "list-group-item";
			var descContent = document.createElement("h4");
			descContent.innerHTML = cardHouse.description;
			desc.appendChild(descContent);
		listGroup.appendChild(desc);
		var interestedPeople = document.createElement("li");
		interestedPeople.className = "list-group-item badgeContainer";
			var ipTop = document.createElement("div");
			ipTop.className = "container-fluid";
				var ipContents = document.createElement("ul");
				ipContents.className = "nav navbar-nav navbar-left";
					var temph4 = document.createElement("h4");
					var li = document.createElement("li");
					temph4.innerHTML = "Interested People";
					li.appendChild(temph4);
					ipContents.appendChild(li);
				var ipContents2 = document.createElement("ul");
				ipContents2.className = "nav navbar-nav navbar-right";
					var li2 = document.createElement("li");
					var tempButton = document.createElement("button");
					tempButton.innerHTML = "Add Myself";
					tempButton.onclick = function(){
						this.innerHTML = "Added Self";
					};
					//Add Myself done kinda
					tempButton.className = "btn btn-default";
					li2.appendChild(tempButton);
					ipContents2.appendChild(li2);
				ipTop.appendChild(ipContents);
				ipTop.appendChild(ipContents2);
			interestedPeople.appendChild(ipTop);
			//GET INTERESTED PEOPLE GOES HERE WHEN IT IS FINISHED
			var placeHolderBadge = document.createElement("img");
			placeHolderBadge.className = "thumbnail farbadge";
			placeHolderBadge.src = "http://puu.sh/l74WX/2677ae32d7.jpg";
			interestedPeople.appendChild(placeHolderBadge);
		listGroup.appendChild(interestedPeople);
	cardContainer.appendChild(listGroup);
	
	var bookmarkLink = document.createElement("a");
		bookmarkLink.href = "#"; //BOOKMARK INTERACTION GOES HERE - modal popup?
		var bookmarkText = document.createElement("li");
			bookmarkText.className = "list-group-item cardbutton";
			bookmarkText.innerHTML = "Bookmark";
		bookmarkLink.appendChild(bookmarkText);
	cardContainer.appendChild(bookmarkLink);
	
	var moreInfoLink = document.createElement("a");
		moreInfoLink.href = "#"; //MORE INFO INTERACTION - modal popup
		var moreInfoText = document.createElement("li");
			moreInfoText.className = "list-group-item cardbutton";
			moreInfoText.innerHTML = "More Info";
			bookmarkLink.appendChild(moreInfoText);
	cardContainer.appendChild(moreInfoLink);
	
	return cardContainer;
			
}

function createPersonCard(cardPerson){
	var cardContainer = document.createElement("div");
	cardContainer.className = "panel panel-default card";
	
	var cardBody = document.createElement("div");
	cardBody.className = "panel-body";
		var media = document.createElement("div");
		media.className = "media";
			var mediaLeft = document.createElement("div");
			mediaLeft.className = "media-left";
				var avatar = document.createElement("img");
					avatar.className = "media-object avatar";
					avatar.src = cardPerson.avatar;
				mediaLeft.appendChild(avatar);
			media.appendChild(mediaLeft);
			var mediaBody = document.createElement("div");
			mediaBody.className = "media-body";
				var name = document.createElement("h4");
					name.className = "media-heading";
					name.innerHTML = cardPerson.name + ", " + cardPerson.age.toString() + ", " + cardPerson.sex;
				mediaBody.appendChild(name);
				var occupation = document.createElement("p");
					occupation.className = "media-heading";
					occupation.innerHTML = cardPerson.occupation;
				mediaBody.appendChild(occupation);
			media.appendChild(mediaBody);
		cardBody.appendChild(media);
	cardContainer.appendChild(cardBody);
	
	
	
	var listGroup = document.createElement("ul");
	listGroup.className = "list-group";
		var badgeContainer = document.createElement("li");
		badgeContainer.className = "list-group-item badgeContainer";
			var badgesLabel = document.createElement("h4");
				badgesLabel.innerHTML = "Badges";
			badgeContainer.appendChild(badgesLabel);
			$.each(getBadges(cardPerson.badgelist), function(index, badge) {
				badgeContainer.appendChild(badge);
			});
		listGroup.appendChild(badgeContainer);
	cardContainer.appendChild(listGroup);
	
	var bookmarkLink = document.createElement("a");
		bookmarkLink.href = "#"; //BOOKMARK INTERACTION GOES HERE
		var bookmarkText = document.createElement("li");
			bookmarkText.className = "list-group-item cardbutton";
			bookmarkText.innerHTML = "Bookmark";
		bookmarkLink.appendChild(bookmarkText);
	cardContainer.appendChild(bookmarkLink);
	
	var moreInfoLink = document.createElement("a");
		moreInfoLink.href = "#"; //MORE INFO  INTERACTION
		var moreInfoText = document.createElement("li");
			moreInfoText.className = "list-group-item cardbutton";
			moreInfoText.innerHTML = "More Info";
			bookmarkLink.appendChild(moreInfoText);
	cardContainer.appendChild(moreInfoLink);
	
	return cardContainer;
			
}

</script>

<script src="../app/js/fabric/dist/fabric.js"></script>

